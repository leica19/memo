#### preflight

レスポンス・ヘッダのオリジンと送信元のオリジンが一致しないとブラウザは通信を失敗させます。

通信の失敗と一口に言っても「リクエスト送信前」と「レスポンス受信後」の２パターンの失敗があります。

本来のリクエストを送信する前に送るリクエストをpreflight requestといいます。

preflightは、「本当にリクエストを送っていいの？」っていうのを確かめるためのブラウザのセキュリティ機構です。

※preflight request

OPTIONSメソッドによるリクエストを他のドメインにあるリソースに向けて送り、実際のリクエストを送信しても安全かどうかを確かめます。

なぜこんなことをするのか。

#### CSRF

CookieやBasic認証など、ドメインに紐付いて自動送信されるユーザー情報を用いてなんらかの完了処理を行わせる受動型の攻撃。

CSRFは実行させたいリクエストを対象ユーザーから送らせることで実現します。

特に重要なのは、攻撃リクエストが届いてしまった時点でサーバー側での処理が実行されてしまう。という点です。
レスポンスをブラウザがエラーとして処分したとしても、既に攻撃が終わっている可能性がある。

こういった事情から、リクエストの送信を制限します。

#### その他

ブラウザ上のリクエストは、「単純リクエスト」とその他のリクエストに分けられていて、単純リクエストの場合は、アクセス・トークンなどのセンシティブな情報が含まれている可能性が低いと判断されるため、OPTIONSは送信されません。

ほとんどのリクエストは1 ~ 10の条件に当てはまるため、OPTIONSは飛びませんが、
REST APIのためにContent-Type: application/jsonヘッダーをつけたり、ユーザー情報の取得のためにAuthorizationヘッダーをつけたりすると、「非・単純」なリクエストと見なされて、OPTIONSリクエストが飛びます。